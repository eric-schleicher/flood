<html>
<head>
    <title>Start</title>

    <link rel="stylesheet" href="styles/style.min.css">

    <script>
        try {
            var execFile = require('child_process').execFile,
                child;

            <!-- build:remove:selenium -->
            // require('nw.gui').Window.get().showDevTools();
            <!-- /build -->

            child = execFile('DynamoWebServer.exe', ['headless'], { cwd: 'dynamo' }, function (error, stdout, stderr) {
                try {
                    if (error) {
                        window.location.href = 'error.html';
                    }

                    console.log('Error: ' + error);
                    console.log('Child Process stdout: ' + stdout);
                    console.log('Child Process stderr: ' + stderr);
                }
                catch (exc){
                    window.location.href = 'error.html';

                    console.log('Exception: ' + exc);
                    console.log('Child Process stdout: ' + stdout);
                    console.log('Child Process stderr: ' + stderr);
                }
            });

            interval = setInterval(function () {

                socket = new WebSocket(require('./scripts/helpers/Settings.js').socketUrl);

                socket.onopen = function () {
                    clearInterval(interval);
                    socket.close();
                    window.location.href = 'app.html';
                };

            }, 500);
        }
        catch (exc){
            window.location.href = 'error.html';

            console.log('Exception: ' + exc);
            console.log('Child Process stdout: ' + stdout);
            console.log('Child Process stderr: ' + stderr);
        }
    </script>

    <style>

        body {
            margin: 0;
            padding: 0;
            font-family: Helvetica, Arial, "Lucida Grande", sans-serif;
            text-align: center;
            background-image: -ms-radial-gradient(center top, circle farthest-corner, #7C7C7C 0%, #3C3C3C 100%);
            background-image: -moz-radial-gradient(center top, circle farthest-corner, #7C7C7C 0%, #3C3C3C 100%);
            background-image: -o-radial-gradient(center top, circle farthest-corner, #7C7C7C 0%, #3C3C3C 100%);
            background-image: -webkit-gradient(radial, center top, 0, center top, 478, color-stop(0, #7C7C7C), color-stop(1, #3C3C3C));
            background-image: -webkit-radial-gradient(center top, circle farthest-corner, #7C7C7C 0%, #3C3C3C 100%);
            background-image: radial-gradient(circle farthest-corner at center top, #7C7C7C 0%, #3C3C3C 100%);
        }

        #loadingtext {
            padding-top: 120px;
            margin-left: auto;
            margin-right: auto;
            font-size: 18px;
            letter-spacing: 12px;
            color: #111;
            text-shadow: 0 1px #666;
        }
        
        #loadingimage {
            width: 500px;
            margin-top: 50px;
            margin-left: auto;
            margin-right: auto;
        }

    </style>
</head>
<body>
   
    <div id="loadingimage">
        <i class="fa fa-cog fa-2x fa-spin" style="color: black;"></i>
    </div>

    <div id="loadingtext">
        STARTING DYNAMO CORE
    </div>

</body>
</html>