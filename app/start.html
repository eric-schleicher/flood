<html>
	<head>
		<script>
			function bodyOnLoad(){
				var execFile = require('child_process').execFile,
					child,
					interval,
					socket,
					settings = {
						maxMessageStack: 100,
						pingTimeout: 1000,
						url: 'ws://127.0.0.1:2100'
					};

				child = execFile('DynamoWebServer.exe' , ['headless'], { cwd: 'dynamo' } , function(error,stdout,stderr) { 
					if (error) {
						console.log(error.stack); 
						console.log('Error code: '+ error.code); 
						console.log('Signal received: '+ error.signal);
					} 
					console.log('Child Process stdout: '+ stdout);
					console.log('Child Process stderr: '+ stderr);
				});

				interval = setInterval(function(){
				
					socket = new WebSocket(settings.url);

					socket.onopen = function () {
						clearInterval(interval);
						socket.close();
						window.location.href = 'app.html';
					};
					
				}, 2000);

			}	
		</script>
	</head>
	<body onload="bodyOnLoad()">
		<h1>
			Wait for redirect...
		</h1>	
	</body>
</html>